(function(){var k,l,o=[].indexOf||function(d){for(var a=0,e=this.length;a<e;a++)if(a in this&&this[a]===d)return a;return-1};self.JSREPLEngine=function(){function d(a,e,f,b,g,c){this.result=f;this.error=b;this.Ruby=g.Ruby;g.print=function(){};this.error_buffer=[];f=function(){return function(a){if(a!=null)return e(String.fromCharCode(a))}}(this);a=function(a){return function(b){if(b!=null)return a.error_buffer.push(String.fromCharCode(b))}}(this);this.Ruby.initialize(null,f,a);c()}d.prototype.Eval=
function(a){var e;this.error_buffer=[];try{return e=this.Ruby.eval(a),this.result(this.Ruby.stringify(e))}catch(f){return typeof f!=="number"?this.error("Internal error: "+f):this.error_buffer.length?this.error(this.error_buffer.join("")):this.error("Unknown error.")}};d.prototype.RawEval=function(a){return this.Eval(a)};d.prototype.GetNextLineIndent=function(a){var e,f,b,g,c,d,h,m,n,i,j;b=f=e=d=g=0;i=a.split("\n");for(a=0,m=i.length;a<m;a++){c=i[a];b=0;j=c.match(l)||[];for(h=0,n=j.length;h<n;h++)if(c=
j[h],o.call(k,c)>=0?(g++,b++):c==="("?(d++,b++):c==="{"?(e++,b++):c==="["?(f++,b++):c==="end"?(g--,b--):c===")"?(d--,b--):c==="]"?(e--,b--):c==="}"&&(f--,b--),g<0||d<0||e<0||f<0)return false}return g>0||d>0||e>0||f>0?b>0?1:0:false};return d}();k="begin,module,def,class,if,unless,case,for,while,until,do".split(",");l=/\s+|\d+(?:\.\d*)?|"(?:[^"]|\\.)*"|'(?:[^']|\\.)*'|\/(?:[^\/]|\\.)*\/|[-+\/*]|[<>=]=?|:?[a-z@$][\w?!]*|[{}()\[\]]|[^\w\s]+/ig}).call(this);

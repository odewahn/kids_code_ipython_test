(function(){var f;f=5;self.JSREPLEngine=function(){function d(a,c,e,g,h,d){this.sandbox=h;this.inputting=this.finished=this.printed=false;this.lines=0;this.sandbox._init();this.sandbox._error=function(b){return function(a){b.finished=true;return g(a)}}(this);this.sandbox._print=function(b){return function(a){b.printed=true;return c(a)}}(this);this.sandbox._prompt=function(b){return function(){if(--b.lines===0&&!b.inputting&&!b.finished)return b.sandbox._finish()}}(this);this.sandbox._input=function(b){return function(c){if(!b.finished)return b.inputting=
true,a(function(a){var d,e,g;for(e=0,g=a.length;e<g;e++)d=a[e],b.sandbox.inbuf.push(d.charCodeAt(0));b.sandbox.inbuf.push(13);b.inputting=false;return c()})}}(this);this.sandbox._finish=function(b){return function(){var a;if(!b.finished)return b.sandbox.inbuf=[],a=b.sandbox._stacktop(f+1),a.length?(a.length>f&&(a[0]="..."),e(a.join(" "))):(b.printed&&c("\n"),e("")),b.finished=true}}(this);d()}d.prototype.Eval=function(a){this.inputting=this.finished=this.printed=false;this.lines=a.split("\n").length;
try{return this.sandbox._run(a)}catch(c){this.sandbox._error(c)}};d.prototype.EvalSync=function(){};d.prototype.GetNextLineIndent=function(a){var c;c=function(){return function(a){var c,d,f,b;c=0;b=a.split(/\s+/);for(d=0,f=b.length;d<f;d++)switch(a=b[d],a){case ":":++c;break;case ";":--c}return c}}(this);return c(a)<=0?false:(a=c(a.split("\n").slice(-1)[0]),a>0?1:a<0?a:0)};return d}()}).call(this);
